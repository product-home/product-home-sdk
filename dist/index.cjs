var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=/*#__PURE__*/t(e),r=e.createContext({}),o="";localStorage.getItem("p_a_id")?o=localStorage.getItem("p_a_id"):(o=Math.random().toString(36).substring(7),localStorage.setItem("p_a_id",o)),console.log("provider loaded");var i=function(e,t,n,r){return t+":"+n+":"+r},u=function(e){try{console.log("postEvent");var t=function(t,n){try{var r=Promise.resolve(fetch("http://localhost:8005/v1/analytics/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(function(){console.log("here")})}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(0,function(e){console.error("here",e),console.warn("Failed to send event",e)});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}};exports.ProductHomeProvider=function(t){var i=t.children,u=t.publicKey,a=e.useState(),c=a[1];return n.default.createElement(r.Provider,{value:{publicKey:u,userId:a[0],identity:function(e){c(e)},anonymousId:o}},i)},exports.useEvents=function(){var t=e.useContext(r),n=t.publicKey,o=t.userId,a=t.anonymousId;return{identity:t.identity,triggerEvent:function(e,t,r){u({event_id:e,feature_id:r,properties:t,user_id:o,anonymous_id:a,key:n}).then().catch()},buildEventName:i}},exports.useFeature=function(t){var n=e.useContext(r),o=n.publicKey,a=n.userId,c=n.anonymousId;return{featureFlag:!0,triggerEvent:function(e,n){console.log("triggering event"),u({event_id:e,feature_id:t,properties:n,user_id:a,anonymous_id:c,key:o}).then().catch()},buildEventName:i,identity:n.identity}};
//# sourceMappingURL=index.cjs.map
