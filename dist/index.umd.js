!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e||self).productHomeSdk={},e.react)}(this,function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=/*#__PURE__*/n(t),r=t.createContext({}),i="";localStorage.getItem("p_a_id")?i=localStorage.getItem("p_a_id"):(i=Math.random().toString(36).substring(7),localStorage.setItem("p_a_id",i)),console.log("provider loaded");var u=function(e,t,n,o){return t+":"+n+":"+o},a=function(e){try{console.log("postEvent");var t=function(t,n){try{var o=Promise.resolve(fetch("http://localhost:8005/v1/analytics/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(function(){console.log("here")})}catch(e){return n(e)}return o&&o.then?o.then(void 0,n):o}(0,function(e){console.error("here",e),console.warn("Failed to send event",e)});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}};e.ProductHomeProvider=function(e){var n=e.children,u=e.publicKey,a=t.useState(),d=a[1];return o.default.createElement(r.Provider,{value:{publicKey:u,userId:a[0],identity:function(e){d(e)},anonymousId:i}},n)},e.useEvents=function(){var e=t.useContext(r),n=e.publicKey,o=e.userId,i=e.anonymousId;return{identity:e.identity,triggerEvent:function(e,t,r){a({event_id:e,feature_id:r,properties:t,user_id:o,anonymous_id:i,key:n}).then().catch()},buildEventName:u}},e.useFeature=function(e){var n=t.useContext(r),o=n.publicKey,i=n.userId,d=n.anonymousId;return{featureFlag:!0,triggerEvent:function(t,n){console.log("triggering event"),a({event_id:t,feature_id:e,properties:n,user_id:i,anonymous_id:d,key:o}).then().catch()},buildEventName:u,identity:n.identity}}});
//# sourceMappingURL=index.umd.js.map
