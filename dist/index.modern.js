import e,{createContext as t,useState as n,useContext as o}from"react";import{v4 as r}from"uuid";const i="https://product-server-chc1.onrender.com",a=async e=>{const t=i+"/v1/api/e";try{await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.error("here",e),console.warn("Failed to send event",e)}},c=t({});let d="";localStorage.getItem("p_a_id")?d=localStorage.getItem("p_a_id"):(d=r(),localStorage.setItem("p_a_id",d));const s=({children:t,publicKey:o})=>{const[r,a]=n();return e.createElement(c.Provider,{value:{publicKey:o,userId:r,identity:(e,t)=>{a(e),(async e=>{const t=i+"/v1/api/i";try{await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.error("here",e),console.warn("Failed to send event",e)}})({user_id:e,properties:t,anonymous_id:d,key:o}).then().catch()},anonymousId:d}},t)},u=(e,t,n,o)=>`${t}:${n}:${o}`,y=e=>{const{publicKey:t,userId:n,identity:r,anonymousId:i}=o(c);return{featureFlag:!0,triggerEvent:(o,r)=>{console.log("triggering event"),a({event_id:o,feature_id:e,properties:r,user_id:n,anonymous_id:i,key:t}).then().catch()},buildEventName:u,identity:r}},l=()=>{const{publicKey:e,userId:t,anonymousId:n,identity:r}=o(c);return{identity:r,triggerEvent:(o,r,i)=>{a({event_id:o,feature_id:i,properties:r,user_id:t,anonymous_id:n,key:e}).then().catch()},buildEventName:u}};export{s as ProductHomeProvider,l as useEvents,y as useFeature};
//# sourceMappingURL=index.modern.js.map
