import e,{createContext as t,useState as n,useContext as r}from"react";var o=t({}),i="";localStorage.getItem("p_a_id")?i=localStorage.getItem("p_a_id"):(i=Math.random().toString(36).substring(7),localStorage.setItem("p_a_id",i)),console.log("provider loaded");var a=function(t){var r=t.children,a=t.publicKey,c=n(),u=c[1];return e.createElement(o.Provider,{value:{publicKey:a,userId:c[0],identity:function(e){u(e)},anonymousId:i}},r)},c=function(e,t,n,r){return t+":"+n+":"+r},u=function(e){try{console.log("postEvent");var t=function(t,n){try{var r=Promise.resolve(fetch("http://localhost:8005/v1/analytics/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).then(function(){console.log("here")})}catch(e){return n(e)}return r&&r.then?r.then(void 0,n):r}(0,function(e){console.error("here",e),console.warn("Failed to send event",e)});return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},d=function(e){var t=r(o),n=t.publicKey,i=t.userId,a=t.anonymousId;return{featureFlag:!0,triggerEvent:function(t,r){console.log("triggering event"),u({event_id:t,feature_id:e,properties:r,user_id:i,anonymous_id:a,key:n}).then().catch()},buildEventName:c,identity:t.identity}},l=function(){var e=r(o),t=e.publicKey,n=e.userId,i=e.anonymousId;return{identity:e.identity,triggerEvent:function(e,r,o){u({event_id:e,feature_id:o,properties:r,user_id:n,anonymous_id:i,key:t}).then().catch()},buildEventName:c}};export{a as ProductHomeProvider,l as useEvents,d as useFeature};
//# sourceMappingURL=index.module.js.map
