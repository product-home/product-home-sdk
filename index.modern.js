import e,{createContext as t,useState as n,useContext as i}from"react";import{v4 as o}from"uuid";const r="https://product-server-chc1.onrender.com",a=async e=>{const t=r+"/v1/api/e";try{await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.warn("Failed to send event",e)}},d=t({});let c="";localStorage.getItem("p_a_id")?c=localStorage.getItem("p_a_id"):(c=o(),localStorage.setItem("p_a_id",c));const s=({children:t,publicKey:i})=>{const[o,a]=n();return e.createElement(d.Provider,{value:{publicKey:i,userId:o,identity:(e,t)=>{a(e),(async e=>{const t=r+"/v1/api/i";try{await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.warn("Failed to send event",e)}})({user_id:e,properties:t,anonymous_id:c,key:i}).then().catch()},anonymousId:c}},t)},u=(e,t,n,i)=>`${t}:${n}:${i}`,y=e=>{const{publicKey:t,userId:n,identity:o,anonymousId:r}=i(d);return{featureFlag:!0,triggerEvent:(i,o)=>{console.log("triggering event"),a({event_id:i,feature_id:e,properties:o,user_id:n,anonymous_id:r,key:t}).then().catch()},buildEventName:u,identity:o}},p=()=>{const{publicKey:e,userId:t,anonymousId:n,identity:o}=i(d);return{identity:o,triggerEvent:(i,o,r)=>{a({event_id:i,feature_id:r,properties:o,user_id:t,anonymous_id:n,key:e}).then().catch()},buildEventName:u}};export{s as ProductHomeProvider,p as useEvents,y as useFeature};
//# sourceMappingURL=index.modern.js.map
